### HTTP протокол

#### 1. Формат протокола HTTP

HTTP - это сокращение от Hypertext Transfer Protocol(Hypertext Transfer Protocol), а транспортный уровень основан на протоколе TCP.

Прежде всего, вам необходимо понять формат сообщения протокола HTTP. Ниже приводится простой пример HTTP-запроса и ответа.

Сообщение-запрос:
```
GET /index.html HTTP/1.1
Host: www.httpcanary.com
```
Первая строка называется строкой запроса, а вторая строка называется заголовком запроса (их может быть более одного), и может быть тело запроса (здесь нет тела запроса для запроса GET).

Ответное сообщение:
```
HTTP/1.1 200 OK
Server: Apache
Connection: Keep-Alive
Content-Type: text/html; charset=UTF-8
Content-Length: 12

Hello World!
```
Первая строка называется строкой ответа, строки 2–4 называются заголовком ответа, а последняя строка - телом ответа.

В реальных приложениях формат протокола HTTP намного сложнее, поэтому я не буду вдаваться в подробности здесь, пожалуйста, запросите более подробную информацию[Щелкните меня, чтобы прочитать](https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview)。

#### 2. Просмотр протокола HTTP

HttpCanary поддерживает анализ протоколов HTTP, включая HTTP1.0, HTTP1.1 и HTTP2, и предоставляет расширенные рабочие представления.

На странице захвата содержимого проведите пальцем влево и вправо, чтобы переключаться между содержимым запроса и ответа. Щелкайте вкладки ниже, чтобы переключаться между различными представлениями.

##### 2.1 Обзорный вид

Ниже представлена ​​обзорная диаграмма содержимого протокола HTTP1.1:

![](/assets/http_overview.png)

Обзорная карта суммирует основную информацию HTTP-запроса, включая URL-адрес, информацию о сервере, тип контента, время и объем данных.

##### 2.2 Raw View

В представлении Raw отображаются необработанные данные протокола HTTP (протокол HTTP2 будет автоматически преобразован в стандартный формат HTTP1.x), вы можете долго нажимать на содержимое, чтобы выбрать и скопировать.

![](/assets/http_raw.png)

##### 2.3 Просмотр заголовков

Заголовки HTTP-запросов и ответов отображаются в представлении «Заголовки». Щелкните подпункт «Заголовки», чтобы выполнить дополнительные операции.

![](/assets/http_headers.png)

##### 2.4 HEX вид

HttpCanary предоставляет HEX-представление для отображения тела запроса и тела ответа в шестнадцатеричном формате, что удобно для разработчиков при анализе формата данных.

![](/assets/http_hex.png)

##### 2.5 Текстовое представление

Текстовое представление отображает тело запроса и тело ответа в текстовой форме и автоматически декодирует контент, а также поддерживает такие форматы кодирования, как gzip, chunked и Brotli.

![](/assets/http_text.png)

Примечание. Контент в нетекстовом формате по-прежнему будет отображаться как искаженные символы.

##### 2.6 Предварительный просмотр

HttpCanary поддерживает форматирование и предварительный просмотр некоторых данных формата, таких как json, изображения, аудио и видео и т. Д.

Например, наиболее распространенный формат json будет автоматически отформатирован:

![](/assets/http_preview.png)

##### 2.7 Просмотр JSON

Хотя предварительный просмотр уже поддерживает форматирование json, HttpCanary по-прежнему предоставляет профессиональное цветовое представление JSON, щелкните содержимое предварительного просмотра, чтобы войти. Представление JSON поддерживает закрытие и расширение узлов, и вы можете щелкнуть узлы, чтобы выполнить больше операций.

![](/assets/http_json.png)

##### 2.8 Просмотр изображения

HttpCanary поддерживает предварительный просмотр содержимого изображения. Щелкните изображение на странице содержимого, чтобы войти в режим предварительного просмотра изображения. Вы можете увеличивать и уменьшать масштаб с помощью жестов, а также можете щелкнуть верхний правый угол для сохранения.

![](/assets/http_image.png)

Просмотр изображений поддерживает не только движущиеся изображения GIF, WebP и других форматов, но также JPG, PNG и другие статические изображения.

##### 2.9 Просмотр аудио

HttpCanary поддерживает воспроизведение аудиоконтента, включая стандартные аудиоформаты, такие как mp3, wav, aac и ogg.

![](/assets/http_audio.png)

##### 2.10 Просмотр видео

Видеоконтент также поддерживает прямое воспроизведение, включая стандартные форматы видео, такие как mp4 и wav.

![](/assets/http_video.png)

##### 2.11 Просмотр URL

Некоторые URL-адреса могут содержать множество параметров. Вы можете нажать, чтобы перейти на страницу подробного предварительного просмотра, чтобы упростить подробные операции с параметрами.

![](/assets/http_url.png)

##### 2.12 Просмотр файлов cookie

Файлы cookie - это обычно используемые данные на веб-страницах, и HttpCanary также разработал для них соответствующие представления, включая содержимое Set-Cookie и содержимое Cookie.

![](/assets/http_set-cookie.png)
![](/assets/http_cookie.png)

<br>

#### 3. Сохранение и отправка HTTP-контента

##### 3.1 Сохранить

На странице захвата содержимого нажмите кнопку «Сохранить» в верхнем правом углу, чтобы сохранить захваченные данные. Сохраненный каталог - это каталог HttpCanary / download на SD-карте. Здесь есть два сохраненных файла: один - это исходный формат данных захвата .hcy, а другой - содержимое тела запроса или тела ответа.

![](/assets/http_save.png)

Кроме того, формат hcy можно повторно открыть с помощью HttpCanary в файловом менеджере.

##### 3.2 Поделиться

Совместное использование HTTP может выбрать разделение запроса или ответа по отдельности, или вы можете выбрать совместное использование в сочетании.Однако некоторые приложения, такие как WeChat и QQ, не поддерживают совместное использование.

![](/assets/http_share.png)



